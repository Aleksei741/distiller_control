//******************************************************************************
//include
//******************************************************************************
#include "mDNS_.h"
#include "mdns.h"
#include "esp_err.h"
#include "esp_log.h"

//******************************************************************************
// Constants
//******************************************************************************

//******************************************************************************
// Type
//******************************************************************************

//******************************************************************************
// Variables
//******************************************************************************
//------------------------------------------------------------------------------
// Global
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Local Variable
//------------------------------------------------------------------------------
static const char *TAG = "mdns";
//------------------------------------------------------------------------------
// Local Class
//------------------------------------------------------------------------------

//******************************************************************************
// Function prototype
//******************************************************************************

//******************************************************************************
// Function
//******************************************************************************
void init_mdns(void)
{
    esp_err_t err = mdns_init();
    if (err) 
    {
        ESP_LOGE(TAG, "mdns_init failed: %x", err);
        return;
    }

    mdns_hostname_set("distiller_control");
    mdns_instance_name_set("My ESP32");
    mdns_service_add(NULL, "_http", "_tcp", 80, NULL, 0);

    ESP_LOGI(TAG, "mDNS started: http://distiller_control.local");
}