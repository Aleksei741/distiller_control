#pragma once
//******************************************************************************
// Секция include
//******************************************************************************
#include "modbus_common.h"

#ifdef __cplusplus
extern "C" {
#endif
//******************************************************************************
// Секция определения констант
//******************************************************************************

//******************************************************************************
// Секция определения типов
//******************************************************************************

//******************************************************************************
// Секция определения глобальных переменных
//******************************************************************************

//******************************************************************************
// Секция прототипов глобальных функций
//******************************************************************************
/**
 * @brief Формирует запрос Modbus RTU на чтение input registers (функция 0x04)
 * @param[in]  slave_id    Адрес устройства (1..247)
 * @param[in]  start_addr  Начальный адрес (0-based)
 * @param[in]  count       Количество регистров (1..125)
 * @param[out] frame       Буфер для фрейма
 * @param[in]  frame_size  Размер буфера
 * @return Длина фрейма (в байтах) или 0 при ошибке
 */
size_t modbus_rtu_build_read_input_registers( uint8_t slave_id, uint16_t start_addr, uint16_t count, uint8_t *frame, size_t frame_size);

/**
 * @brief Парсит ответ Modbus RTU на чтение input registers
 * @param[in]  frame       Принятый фрейм
 * @param[in]  frame_len   Длина фрейма
 * @param[in]  slave_id    Ожидаемый slave ID
 * @param[in]  count       Ожидаемое количество регистров
 * @param[out] registers   Буфер для регистров (16-битные значения)
 * @return Код ошибки
 */
modbus_err_t modbus_rtu_parse_read_input_registers( const uint8_t *frame, size_t frame_len, uint8_t slave_id, uint16_t count, modbus_reg_t *registers);
//******************************************************************************
// Секция определения макросов
//******************************************************************************


#ifdef __cplusplus
}
#endif
//******************************************************************************
// ENF OF FILE
//******************************************************************************