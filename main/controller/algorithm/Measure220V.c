//******************************************************************************
//include
//******************************************************************************
#include "adc_drv.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"
#include "esp_system.h"
#include "esp_err.h"
#include "esp_log.h"

#include "esp_adc/adc_continuous.h"

//******************************************************************************
// Constants
//******************************************************************************

//******************************************************************************
// Type
//******************************************************************************

//******************************************************************************
// Variables
//******************************************************************************
//------------------------------------------------------------------------------
// Global
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Local Variable
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Local Class
//------------------------------------------------------------------------------

//******************************************************************************
// Function prototype
//******************************************************************************

//******************************************************************************
// Function
//******************************************************************************
static void IRAM_ATTR voltage_done_cb(uint16_t data)
{
    // Обработка полученного значения напряжения 220В
    ESP_LOGI("Measure220V", "Voltage data received: %d", data);
}
//------------------------------------------------------------------------------
void Measure220V_init(void)
{
    adc_channel_config_t config_220V = {
        .on_conv_done = voltage_done_cb,
        .channel = ADC_CHANNEL_6 
    };
    adc_init(&config_220V);

    ESP_LOGI("Measure220V", "Measure220V initialized");
}
